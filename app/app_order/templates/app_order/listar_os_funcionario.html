<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Ordens de Serviço em Andamento</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="bg-light">
    <div class="container mt-5">
      <!-- Logout -->
      <div class="d-flex justify-content-end mb-3">
        <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm"
          >Sair</a
        >
      </div>

      <h3 class="mb-4">Ordens de Serviço em Andamento</h3>

      <table class="table table-striped table-bordered shadow-sm">
        <thead class="table-dark">
          <tr>
            <th>Número OS</th>
            <th>Cliente</th>
            <th>Email</th>
            <th>Descrição</th>
            <th>Ação</th>
          </tr>
        </thead>
        <tbody>
          {% for os in ordens %}
          <tr>
            <td>{{ os.numero_os|default:"—" }}</td>
            <td>{{ os.nome_cliente }}</td>
            <td>{{ os.email_cliente }}</td>
            <td>{{ os.descricao }}</td>
            <td>
              {% if os.status == "concluida" %}
              <span class="badge bg-success">Concluído</span>
              {% elif os.numero_os %}
              <a
                href="{% url 'concluir_os' numero_os=os.numero_os %}"
                class="btn btn-success btn-sm"
                >Concluir</a
              >
              {% else %}
              <span class="text-muted">Sem nº OS</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
