{% extends "app_order/base.html" %}
{% load static %}
{% block title %}Ordem Solicitada{% endblock %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height: 70vh;">
  <div class="card p-5 shadow-sm" style="max-width: 600px; border-radius: 1rem;">
    <!-- Ícone e cabeçalho -->
    <div class="text-center mb-4">
      <i class="bi bi-check-circle-fill" style="font-size: 4rem; color: #28a745;"></i>
      <h2 class="mt-3">Ordem Solicitada com Sucesso</h2>
      <p class="text-muted">
        Sua ordem de serviço foi registrada. Após aprovação, um número será atribuído.
      </p>
    </div>

    <!-- STATUS e NÚMERO -->
    <div class="mx-auto mb-4" style="max-width: 380px;">
      <div class="bg-light p-3 rounded text-center">
        <div class="row justify-content-center">
          <!-- Status -->
          <div class="col-6 border-end">
            <h6 class="fw-bold">Status</h6>
            <span id="status-os" class="badge bg-warning text-dark">
              Aguardando...
              <span class="spinner-border spinner-border-sm text-dark ms-2" role="status">
                <span class="visually-hidden">Carregando...</span>
              </span>
            </span>
          </div>
          <!-- Número OS -->
          <div class="col-6">
            <h6 class="fw-bold">Número OS</h6>
            <span id="numero-os" data-pk="{{ ordem_servico.pk }}">
              {{ ordem_servico.numero_os|default:"XXXXX" }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Botões de ação -->
    <div class="d-flex flex-column flex-md-row justify-content-between gap-2">
      <a href="{% url 'listar_os_funcionario' %}" class="btn btn-outline-secondary w-100 w-md-auto">
        Ver Histórico
      </a>
      <a href="{% url 'painel_funcionario' %}" class="btn btn-primary w-100 w-md-auto">
        Voltar ao Início
      </a>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
  <script src="{% static 'app_order/js/os_sucesso_auto_reload.js' %}?v=1"></script>
{% endblock %}
